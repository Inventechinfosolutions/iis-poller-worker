# =============================================================================
# IIS Poller Worker - Environment Variables (Development/Docker)
# =============================================================================
# Development environment configuration for Docker deployment
# =============================================================================

# -----------------------------------------------------------------------------
# Application Configuration
# -----------------------------------------------------------------------------
APP_NAME=iis-poller-worker
APP_VERSION=1.0.0
WORKER_TIMEOUT=300
HEALTH_API_PORT=3009
API_PREFIX=poller-worker/api/v1

# -----------------------------------------------------------------------------
# Kafka Configuration
# -----------------------------------------------------------------------------
KAFKA_BOOTSTRAP_SERVERS=kafka:29092
KAFKA_CLIENT_ID=poller-worker
KAFKA_GROUP_ID=poller-worker-group
KAFKA_REPLICATION_FACTOR=1

# Kafka Topics
POLLING_QUEUE_TOPIC=polling-queue
FILE_EVENT_QUEUE_TOPIC=file-event-queue
DLQ_TOPIC=polling-queue-dlq

# Kafka Retry Configuration
KAFKA_MAX_RETRIES=3
KAFKA_RETRY_DELAY=5
KAFKA_TIMEOUT=30000
KAFKA_DELIVERY_TIMEOUT=120000

# -----------------------------------------------------------------------------
# Poller Worker Configuration
# -----------------------------------------------------------------------------
POLL_INTERVAL=5
MAX_CONCURRENT_JOBS=10
BATCH_SIZE=100
MAX_FILE_BATCH_SIZE=10

# -----------------------------------------------------------------------------
# Source Connection Configuration
# -----------------------------------------------------------------------------
DEFAULT_SOURCE_TYPE=dummy
CONNECTION_TIMEOUT=30
READ_TIMEOUT=60

# -----------------------------------------------------------------------------
# File Processing Configuration
# -----------------------------------------------------------------------------
SUPPORTED_FILE_EXTENSIONS=.csv,.xlsx,.xls,.txt,.pdf
MAX_FILE_SIZE=104857600

# -----------------------------------------------------------------------------
# Dummy Data Configuration
# -----------------------------------------------------------------------------
DUMMY_DATA_PATH=./dummy_data

# -----------------------------------------------------------------------------
# Logging Configuration
# -----------------------------------------------------------------------------
LOG_LEVEL=INFO
LOG_FORMAT=json

# -----------------------------------------------------------------------------
# Metrics and Monitoring Configuration
# -----------------------------------------------------------------------------
METRICS_PORT=9093
ENABLE_METRICS=true
HEALTH_CHECK_INTERVAL=60
ENABLE_HEALTH_CHECK=true

# -----------------------------------------------------------------------------
# Environment Settings
# -----------------------------------------------------------------------------
ENVIRONMENT=development
DEBUG=false

# -----------------------------------------------------------------------------
# MinIO/S3 Configuration (for S3 source type)
# -----------------------------------------------------------------------------
MINIO_ENDPOINT=minio:9000
MINIO_ACCESS_KEY=minioadmin
MINIO_SECRET_KEY=minioadmin123
MINIO_SECURE=false

# When nxtworkforce=true is passed in polling job metadata, poller worker will
# first upload the file into this bucket using the above MINIO_* credentials,
# then publish file events pointing to the uploaded object.
NXTWORKFORCE_SAVE_BUCKET=resume-bucket

# -----------------------------------------------------------------------------
# MySQL Database Configuration
# -----------------------------------------------------------------------------
DATABASE_URL=mysql+aiomysql://root:${MYSQL_ROOT_PASSWORD:-rootpassword}@mysql:3306/iis_poller_worker?charset=utf8mb4
MYSQL_HOST=mysql
MYSQL_PORT=3306
MYSQL_USER=root
MYSQL_PASSWORD=${MYSQL_ROOT_PASSWORD:-rootpassword}
MYSQL_DATABASE=iis_poller_worker
MYSQL_CHARSET=utf8mb4

# -----------------------------------------------------------------------------
# Redis Configuration
# -----------------------------------------------------------------------------
REDIS_HOST=redis
REDIS_PORT=6379
REDIS_PASSWORD=
REDIS_DB=0
REDIS_CONNECTION_POOL_SIZE=20
REDIS_SOCKET_KEEPALIVE=true
REDIS_RETRY_ON_TIMEOUT=true
REDIS_HEALTH_CHECK_INTERVAL=30
REDIS_MAX_CONNECTIONS=50
REDIS_SOCKET_CONNECT_TIMEOUT=5
REDIS_SOCKET_TIMEOUT=5
FILE_TRACKING_TTL_DAYS=30
CONNECTION_STATS_TTL_DAYS=90
